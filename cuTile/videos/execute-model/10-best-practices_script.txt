最后一节，我们来总结 cuTile Python 执行模型的关键要点和最佳实践。

首先回顾关键要点。

第一点，Block 和 Tile 的区别。这是最核心的概念，Block 是执行单元，负责运行代码。Tile 是数据单元，是被处理的数据。千万不要混淆它们！

第二点，执行空间。有三种不同的执行空间：Host Code 运行在 CPU 上，Tile Code 运行在 GPU 上使用 Tile 抽象，SIMT Code 是传统的 CUDA 编程模型。代码通过 ct.launch 从 Host 转移到 Tile 执行空间。

第三点，函数类型。@ct.kernel 装饰器定义内核函数，它是 Grid 的入口点。@ct.function 装饰器定义 Tile 函数，用于封装可复用的逻辑。未标注的函数会被自动推断加入执行空间，这是一个非常便利的特性。

第四点，并行性。Block 级并行是显式指定的，通过 Grid 参数控制有多少个 Block。Thread 级并行是自动处理的，隐式管理，程序员无需关心。Tile 操作会自动并行化，并且自动同步，无需手动调用同步函数。

现在看推荐的做法。

第一，使用常量嵌入标注 Tile 形状参数。因为形状必须在编译时已知，使用 ct.Constant[int] 可以获得更好的优化。

第二，合理组织 Grid 大小以匹配问题规模。根据数据大小和 Tile 大小来计算需要多少个 Block。

第三，利用 @ct.function 复用代码。将复杂的逻辑分解为多个函数，提高代码的可读性和可维护性。

第四，简单的工具函数让编译器自动推断。不需要逐个标注，保持代码简洁。

再看需要避免的做法。

第一，不要混淆 Block 和 Tile 的概念。它们是完全不同的东西，一个是执行单元，一个是数据单元。

第二，不要在 Tile Code 中使用未支持的 Python 特性。记住，Tile Code 中没有 Python 运行时，只支持文档中列举的特性。

第三，不要对频繁变化的参数使用常量嵌入。这会导致大量重新编译，反而降低性能。

第四，不要传递别名数组给内核。同一个数组传递多次会导致数据竞争和未定义行为。

总结一下，cuTile Python 提供了简洁优雅的 GPU 编程体验。它让你可以专注于算法本身，而不是底层的线程管理和同步细节。通过 Tile 抽象，你可以用接近 NumPy 的方式编写 GPU 代码，同时获得极致的性能。

感谢观看本系列视频！希望你在 GPU 编程之旅中收获满满，编写出高效优雅的 cuTile 程序！

