<mxfile host="65bd71144e">
    <diagram name="第8页-Tile并行性" id="tile-parallelism">
        <mxGraphModel dx="1795" dy="1057" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1920" pageHeight="1080" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="bg" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#1a1a1a;strokeColor=none;" parent="1" vertex="1">
                    <mxGeometry width="1920" height="1170" as="geometry"/>
                </mxCell>
                <mxCell id="title" value="Tile 并行性：自动并行执行" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=72;fontStyle=1;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="120" y="60" width="1400" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="title-line" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#76FF03;strokeColor=none;" parent="1" vertex="1">
                    <mxGeometry x="120" y="160" width="150" height="6" as="geometry"/>
                </mxCell>
                <mxCell id="model-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#212121;strokeColor=#76FF03;strokeWidth=3;" parent="1" vertex="1">
                    <mxGeometry x="120" y="220" width="1680" height="430" as="geometry"/>
                </mxCell>
                <mxCell id="model-title" value="并行执行模型" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=42;fontStyle=1;fontColor=#76FF03;" parent="1" vertex="1">
                    <mxGeometry x="160" y="250" width="400" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="tile-label" value="Tile (128 个元素)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=32;fontColor=#42A5F5;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="160" y="320" width="350" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="e0" value="e₀" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1E3A5F;strokeColor=#42A5F5;strokeWidth=2;fontSize=24;fontColor=#FFFFFF;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="200" y="380" width="80" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="e1" value="e₁" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1E3A5F;strokeColor=#42A5F5;strokeWidth=2;fontSize=24;fontColor=#FFFFFF;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="300" y="380" width="80" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="e2" value="e₂" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1E3A5F;strokeColor=#42A5F5;strokeWidth=2;fontSize=24;fontColor=#FFFFFF;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="400" y="380" width="80" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="e3" value="e₃" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1E3A5F;strokeColor=#42A5F5;strokeWidth=2;fontSize=24;fontColor=#FFFFFF;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="500" y="380" width="80" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="dots1" value="..." style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=36;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="600" y="380" width="80" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="arrow0" value="" style="endArrow=classic;html=1;strokeColor=#FFB300;strokeWidth=4;" parent="1" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="240" y="450" as="sourcePoint"/>
                        <mxPoint x="240" y="510" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arrow1" value="" style="endArrow=classic;html=1;strokeColor=#FFB300;strokeWidth=4;" parent="1" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="340" y="450" as="sourcePoint"/>
                        <mxPoint x="340" y="510" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arrow2" value="" style="endArrow=classic;html=1;strokeColor=#FFB300;strokeWidth=4;" parent="1" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="440" y="450" as="sourcePoint"/>
                        <mxPoint x="440" y="510" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arrow3" value="" style="endArrow=classic;html=1;strokeColor=#FFB300;strokeWidth=4;" parent="1" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="540" y="450" as="sourcePoint"/>
                        <mxPoint x="540" y="510" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="thread-label" value="自动映射到线程（隐式）" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=32;fontColor=#FFB300;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="160" y="470" width="520" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="t0" value="Thread₀" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4A2C00;strokeColor=#FFB300;strokeWidth=2;fontSize=20;fontColor=#FFFFFF;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="190" y="520" width="100" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="t1" value="Thread₁" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4A2C00;strokeColor=#FFB300;strokeWidth=2;fontSize=20;fontColor=#FFFFFF;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="290" y="520" width="100" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="t2" value="Thread₂" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4A2C00;strokeColor=#FFB300;strokeWidth=2;fontSize=20;fontColor=#FFFFFF;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="390" y="520" width="100" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="t3" value="Thread₃" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4A2C00;strokeColor=#FFB300;strokeWidth=2;fontSize=20;fontColor=#FFFFFF;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="490" y="520" width="100" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="dots2" value="..." style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=36;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="600" y="520" width="80" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="code-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1B3A1B;strokeColor=#76FF03;strokeWidth=2;" parent="1" vertex="1">
                    <mxGeometry x="900" y="320" width="880" height="320" as="geometry"/>
                </mxCell>
                <mxCell id="code-title" value="代码示例" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=36;fontStyle=1;fontColor=#76FF03;" parent="1" vertex="1">
                    <mxGeometry x="940" y="345" width="250" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="code-content" value="@ct.function&#10;def process_tile(tile):&#10;    # Tile 操作自动并行化&#10;    # 128 个元素分配给多个线程&#10;    return tile * 2.0 + 1.0&#10;&#10;@ct.kernel&#10;def parallel_kernel(a, b):&#10;    pid = ct.bid(0)&#10;    &#10;    # 加载 128 个元素的 Tile&#10;    tile_a = ct.load(a, index=(pid,),&#10;                     shape=(128,))&#10;    &#10;    # 自动并行执行！&#10;    result = process_tile(tile_a)&#10;    &#10;    ct.store(b, index=(pid,),&#10;             tile=result)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=22;fontFamily=Courier New;fontColor=#E0E0E0;spacingLeft=20;spacingTop=10;" parent="1" vertex="1">
                    <mxGeometry x="920" y="380" width="840" height="190" as="geometry"/>
                </mxCell>
                <mxCell id="sync-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#212121;strokeColor=#42A5F5;strokeWidth=3;" parent="1" vertex="1">
                    <mxGeometry x="120" y="660" width="1680" height="340" as="geometry"/>
                </mxCell>
                <mxCell id="sync-title" value="自动同步保证" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=48;fontStyle=1;fontColor=#42A5F5;" parent="1" vertex="1">
                    <mxGeometry x="160" y="690" width="500" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="sync-text" value="除非另有说明，函数执行将在函数返回前完成" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=32;fontColor=#E0E0E0;" parent="1" vertex="1">
                    <mxGeometry x="160" y="760" width="900" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="compare-title" value="cuTile vs 传统 CUDA" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=36;fontStyle=1;fontColor=#FFB300;" parent="1" vertex="1">
                    <mxGeometry x="160" y="820" width="500" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="cutile-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1B3A1B;strokeColor=#76FF03;strokeWidth=2;" parent="1" vertex="1">
                    <mxGeometry x="180" y="880" width="700" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="cutile-label" value="cuTile：自动同步" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontColor=#76FF03;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="180" y="880" width="700" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="cutile-text" value="result = tile_a + tile_b  # 自动同步，无需显式调用" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=22;fontFamily=Courier New;fontColor=#E0E0E0;" parent="1" vertex="1">
                    <mxGeometry x="200" y="920" width="660" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="cuda-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#3E2723;strokeColor=#FF6F00;strokeWidth=2;" parent="1" vertex="1">
                    <mxGeometry x="1000" y="880" width="750" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="cuda-label" value="传统 CUDA：需要显式同步" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontColor=#FF6F00;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="1000" y="880" width="750" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="cuda-text" value="temp[tid] = a[tid];&#10;__syncthreads();  // 必须显式同步" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=22;fontFamily=Courier New;fontColor=#E0E0E0;" parent="1" vertex="1">
                    <mxGeometry x="1020" y="920" width="710" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="keypoint-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4A148C;strokeColor=#BA68C8;strokeWidth=3;opacity=30;" parent="1" vertex="1">
                    <mxGeometry x="100" y="1040" width="1680" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="keypoint-icon" value="⚡" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=50;" parent="1" vertex="1">
                    <mxGeometry x="130" y="1055" width="60" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="keypoint-text" value="核心优势：Tile 操作自动并行 + 自动同步，无需手动管理线程和同步点" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=32;fontColor=#E1BEE7;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="210" y="1065" width="1400" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="page-number" value="08" style="text;html=1;strokeColor=none;fillColor=none;align=right;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=72;fontStyle=1;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="1720" y="970" width="150" height="80" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>